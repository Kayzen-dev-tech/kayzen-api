<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Documentation | Kayzen</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { background-color: #0f172a; color: #e2e8f0; font-family: 'Inter', sans-serif; }
        .endpoint-card { border-left: 4px solid; background: rgba(30, 41, 59, 0.5); }
        .method-get { border-color: #3b82f6; }
        pre { background: #1e293b; padding: 1rem; border-radius: 0.5rem; overflow-x: auto; }
        .custom-scrollbar::-webkit-scrollbar { width: 8px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #0f172a; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }
    </style>
</head>
<body class="p-6 md:p-12">
    <div class="max-w-6xl mx-auto">
        <header class="mb-12 flex justify-between items-center border-b border-slate-700 pb-6">
            <div>
                <h1 class="text-3xl font-bold text-white bg-clip-text text-transparent bg-gradient-to-r from-cyan-400 to-blue-500">Kayzen API Docs</h1>
                <p class="text-slate-400 mt-2">Interactive Documentation & Playground</p>
            </div>
            <a href="/" class="px-4 py-2 rounded-lg bg-slate-800 hover:bg-slate-700 transition text-cyan-400"><i class="fas fa-home mr-2"></i> Back Home</a>
        </header>

        <div class="mb-8 p-6 bg-slate-800 rounded-lg border border-slate-700 shadow-lg">
            <h3 class="text-lg font-bold text-white mb-2"><i class="fas fa-key text-yellow-500 mr-2"></i> Authentication</h3>
            <p class="text-sm text-slate-400 mb-4">Enter your API Key below to test the endpoints.</p>
            <input type="text" id="globalApiKey" value="kayzen" class="w-full md:w-1/2 bg-slate-900 border border-slate-600 rounded p-3 text-white focus:outline-none focus:border-cyan-500 transition" placeholder="Enter API Key">
        </div>

        <div class="space-y-6" id="endpoints"></div>
    </div>

    <script>
        const endpoints = [
            { method: 'GET', path: '/api/tiktok', params: [{name: 'url', desc: 'Video URL'}], category: 'TikTok', title: 'TikTok Download' },
            { method: 'GET', path: '/api/tiktok', params: [{name: 'type', value: 'search', desc: 'Fixed Value'}, {name: 'query', desc: 'Keywords'}], category: 'TikTok', title: 'TikTok Search' },
            { method: 'GET', path: '/api/tiktok', params: [{name: 'type', value: 'stalk', desc: 'Fixed Value'}, {name: 'username', desc: 'Username'}], category: 'TikTok', title: 'TikTok Stalk' },
            
            { method: 'GET', path: '/api/youtube', params: [{name: 'url', desc: 'YouTube URL'}], category: 'YouTube', title: 'YouTube Video DL' },
            { method: 'GET', path: '/api/youtube', params: [{name: 'type', value: 'audio', desc: 'Fixed Value'}, {name: 'url', desc: 'YouTube URL'}], category: 'YouTube', title: 'YouTube Audio (MP3)' },
            { method: 'GET', path: '/api/youtube', params: [{name: 'type', value: 'search', desc: 'Fixed Value'}, {name: 'query', desc: 'Song/Video Title'}], category: 'YouTube', title: 'YouTube Search' },
            
            { method: 'GET', path: '/api/instagram', params: [{name: 'url', desc: 'Post/Reel/Story URL'}], category: 'Instagram', title: 'Instagram Download' },
            { method: 'GET', path: '/api/instagram', params: [{name: 'type', value: 'stalk', desc: 'Fixed Value'}, {name: 'username', desc: 'Username'}], category: 'Instagram', title: 'Instagram Stalk' },

            { method: 'GET', path: '/api/pinterest', params: [{name: 'query', desc: 'Search Query'}], category: 'Pinterest', title: 'Pinterest Search' },
            { method: 'GET', path: '/api/pinterest', params: [{name: 'type', value: 'download', desc: 'Fixed Value'}, {name: 'url', desc: 'Pin URL'}], category: 'Pinterest', title: 'Pinterest Download' },

            { method: 'GET', path: '/api/twitter', params: [{name: 'url', desc: 'Tweet URL'}], category: 'Twitter', title: 'Twitter Download' },
            { method: 'GET', path: '/api/twitter', params: [{name: 'type', value: 'stalk', desc: 'Fixed Value'}, {name: 'username', desc: 'Username'}], category: 'Twitter', title: 'Twitter Stalk' },
            { method: 'GET', path: '/api/twitter', params: [{name: 'type', value: 'search', desc: 'Fixed Value'}, {name: 'query', desc: 'Keywords'}], category: 'Twitter', title: 'Twitter Search' },

            { method: 'GET', path: '/api/ai/chat', params: [{name: 'prompt', desc: 'Chat Message'}], category: 'AI', title: 'Kayzen AI Chat' },
            { method: 'GET', path: '/api/ai/image', params: [{name: 'prompt', desc: 'Image Description'}], category: 'AI', title: 'AI Image Gen' },
            { method: 'GET', path: '/api/ai/grammar', params: [{name: 'text', desc: 'Text to fix'}], category: 'AI', title: 'Grammar Corrector' },
            { method: 'GET', path: '/api/ai/code', params: [{name: 'code', desc: 'Code Snippet'}], category: 'AI', title: 'Code Explainer' },
            { method: 'GET', path: '/api/ai/summary', params: [{name: 'text', desc: 'Long Text'}], category: 'AI', title: 'Text Summarizer' }
        ];

        const container = document.getElementById('endpoints');
        let htmlContent = '';

        endpoints.forEach((ep, index) => {
            const id = `resp-${index}`;
            let inputsHtml = '';
            
            ep.params.forEach((p, paramIndex) => {
                const isFixed = p.value ? `value="${p.value}" readonly class="opacity-50 cursor-not-allowed bg-slate-950"` : 'class="bg-slate-900"';
                const labelText = p.value ? `${p.name} (Required)` : p.name;
                const inputId = `input-${index}-${paramIndex}`;
                
                inputsHtml += `
                    <div class="mt-3">
                        <label class="text-xs text-slate-400 block uppercase font-bold mb-1">${labelText}</label>
                        <input type="text" id="${inputId}" ${isFixed} class="w-full border border-slate-700 rounded p-2 text-sm text-white focus:border-cyan-500 outline-none transition" placeholder="${p.desc}">
                    </div>
                `;
            });

            htmlContent += `
                <div class="endpoint-card method-get p-6 rounded-lg hover:bg-slate-800 transition duration-300">
                    <div class="flex flex-col md:flex-row md:items-center justify-between mb-4 gap-4">
                        <div class="flex items-center gap-3">
                            <span class="px-3 py-1 bg-blue-900 text-blue-200 text-xs font-bold rounded uppercase shadow">${ep.method}</span>
                            <div>
                                <h4 class="text-lg font-bold text-white">${ep.title}</h4>
                                <code class="text-xs text-slate-400 font-mono">${ep.path}</code>
                            </div>
                        </div>
                        <span class="self-start md:self-center text-xs font-bold text-slate-900 bg-cyan-400 px-3 py-1 rounded-full uppercase tracking-wider shadow-lg shadow-cyan-500/20">${ep.category}</span>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mt-6">
                        <div class="bg-slate-900/50 p-4 rounded-lg border border-slate-700/50">
                            <h4 class="text-sm font-bold text-cyan-400 mb-4 border-b border-slate-700 pb-2">PARAMETERS</h4>
                            ${inputsHtml}
                            <button onclick="requestApi(this, ${index})" class="mt-6 w-full py-2 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white text-sm font-bold rounded shadow-lg transform hover:-translate-y-0.5 transition-all">
                                <i class="fas fa-bolt mr-2"></i> Execute
                            </button>
                        </div>
                        <div class="bg-slate-900/50 p-4 rounded-lg border border-slate-700/50 flex flex-col">
                            <h4 class="text-sm font-bold text-green-400 mb-4 border-b border-slate-700 pb-2">RESPONSE</h4>
                            <pre id="${id}" class="flex-1 text-xs text-slate-300 font-mono bg-slate-950 p-3 rounded border border-slate-800 overflow-y-auto custom-scrollbar h-64">Waiting for request...</pre>
                        </div>
                    </div>
                </div>
            `;
        });

        container.innerHTML = htmlContent;

        window.requestApi = async function(btn, index) {
            const respBox = document.getElementById(`resp-${index}`);
            const originalBtnText = btn.innerHTML;
            
            try {
                btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
                btn.disabled = true;
                respBox.innerText = "Processing request...";

                const apiKey = document.getElementById('globalApiKey').value;
                const ep = endpoints[index];
                let query = `?apikey=${apiKey}`;

                ep.params.forEach((p, paramIndex) => {
                    const inputVal = document.getElementById(`input-${index}-${paramIndex}`).value;
                    query += `&${p.name}=${encodeURIComponent(inputVal)}`;
                });

                const res = await fetch(ep.path + query);
                const data = await res.json();
                
                respBox.innerText = JSON.stringify(data, null, 2);
            } catch (err) {
                respBox.innerText = "Client Error: " + err.message;
            } finally {
                btn.innerHTML = originalBtnText;
                btn.disabled = false;
            }
        };
    </script>
</body>
</html>
