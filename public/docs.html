<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Documentation | Kayzen</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { background-color: #0f172a; color: #e2e8f0; font-family: 'Inter', sans-serif; }
        .endpoint-card { border-left: 4px solid; background: rgba(30, 41, 59, 0.5); }
        .method-get { border-color: #3b82f6; }
        .method-post { border-color: #22c55e; }
        pre { background: #1e293b; padding: 1rem; border-radius: 0.5rem; overflow-x: auto; }
    </style>
</head>
<body class="p-6 md:p-12">
    <div class="max-w-5xl mx-auto">
        <header class="mb-12 flex justify-between items-center">
            <div>
                <h1 class="text-3xl font-bold text-white">API Docs</h1>
                <p class="text-slate-400">Interactive Documentation for Kayzen API</p>
            </div>
            <a href="/" class="text-cyan-400 hover:text-cyan-300"><i class="fas fa-home"></i> Back Home</a>
        </header>

        <div class="mb-8 p-4 bg-slate-800 rounded-lg border border-slate-700">
            <label class="block text-sm text-slate-400 mb-2">Global API Key</label>
            <input type="text" id="globalApiKey" value="kayzen" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white focus:outline-none focus:border-cyan-500" placeholder="Enter API Key">
        </div>

        <div class="space-y-6" id="endpoints">
        </div>
    </div>

    <script>
        const endpoints = [
            { method: 'GET', path: '/api/tiktok', params: [{name: 'url', desc: 'TikTok Video URL'}], category: 'Downloader' },
            { method: 'GET', path: '/api/youtube', params: [{name: 'url', desc: 'YouTube Video URL'}], category: 'Downloader' },
            { method: 'GET', path: '/api/ytmp3', params: [{name: 'url', desc: 'YouTube Video URL'}], category: 'Downloader' },
            { method: 'GET', path: '/api/pinterest', params: [{name: 'query', desc: 'Search Query'}], category: 'Search' },
            { method: 'GET', path: '/api/ai/chat', params: [{name: 'prompt', desc: 'Message'}], category: 'AI' },
            { method: 'GET', path: '/api/ai/image', params: [{name: 'prompt', desc: 'Image Description'}], category: 'AI' },
            { method: 'GET', path: '/api/ai/grammar', params: [{name: 'text', desc: 'Text to fix'}], category: 'AI' },
            { method: 'GET', path: '/api/ai/code', params: [{name: 'code', desc: 'Code snippet'}], category: 'AI' },
            { method: 'GET', path: '/api/ai/summary', params: [{name: 'text', desc: 'Long text'}], category: 'AI' }
        ];

        const container = document.getElementById('endpoints');

        endpoints.forEach((ep, index) => {
            const id = `resp-${index}`;
            let inputsHtml = '';
            ep.params.forEach(p => {
                inputsHtml += `
                    <div class="mt-2">
                        <label class="text-xs text-slate-400 block">${p.name} (${p.desc})</label>
                        <input type="text" class="inp-${index} w-full bg-slate-900 border border-slate-700 rounded p-2 mt-1 text-sm" placeholder="${p.desc}">
                    </div>
                `;
            });

            const html = `
                <div class="endpoint-card method-get p-6 rounded-lg">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center gap-3">
                            <span class="px-3 py-1 bg-blue-900 text-blue-200 text-xs font-bold rounded uppercase">${ep.method}</span>
                            <code class="text-lg font-mono text-white">${ep.path}</code>
                        </div>
                        <span class="text-xs text-slate-500 bg-slate-800 px-2 py-1 rounded">${ep.category}</span>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="text-sm font-bold text-slate-300 mb-2">Parameters</h4>
                            ${inputsHtml}
                            <button onclick="testEndpoint(${index}, '${ep.path}')" class="mt-4 px-4 py-2 bg-cyan-600 hover:bg-cyan-500 text-white text-sm font-bold rounded transition w-full">
                                <i class="fas fa-play mr-2"></i> Try it out
                            </button>
                        </div>
                        <div>
                            <h4 class="text-sm font-bold text-slate-300 mb-2">Response</h4>
                            <pre id="${id}" class="text-xs text-green-400 h-40 overflow-y-auto">Waiting for request...</pre>
                        </div>
                    </div>
                </div>
            `;
            container.innerHTML += html;
        });

        async function testEndpoint(index, path) {
            const apiKey = document.getElementById('globalApiKey').value;
            const inputs = document.querySelectorAll(`.inp-${index}`);
            const respBox = document.getElementById(`resp-${index}`);
            
            let query = `?apikey=${apiKey}`;
            endpoints[index].params.forEach((p, i) => {
                query += `&${p.name}=${encodeURIComponent(inputs[i].value)}`;
            });

            respBox.innerText = "Processing...";
            
            try {
                const res = await fetch(path + query);
                const data = await res.json();
                respBox.innerText = JSON.stringify(data, null, 2);
            } catch (err) {
                respBox.innerText = "Error: " + err.message;
            }
        }
    </script>
</body>
</html>
