<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Kayzen API Docs & Tester</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #f4f6f9; color: #333; }
        .sidebar { height: 100vh; position: fixed; top: 0; left: 0; width: 250px; background: #fff; padding: 20px; overflow-y: auto; border-right: 1px solid #ddd; }
        .content { margin-left: 260px; padding: 40px; }
        .endpoint-card { background: #fff; padding: 20px; margin-bottom: 20px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); border: 1px solid #e9ecef; }
        .method { font-weight: bold; padding: 5px 10px; border-radius: 4px; font-size: 0.8rem; margin-right: 10px; display: inline-block; width: 80px; text-align: center; }
        .get { background: #e7f5ff; color: #007bff; }
        .post { background: #e8f5e9; color: #28a745; }
        .path { font-family: monospace; font-size: 1.1em; font-weight: 600; color: #d63384; }
        .response-area { background: #2d2d2d; color: #00ff00; padding: 15px; border-radius: 5px; margin-top: 15px; display: none; white-space: pre-wrap; font-family: monospace; max-height: 300px; overflow-y: auto; }
        .input-group-text { width: 120px; }
        h5 { margin-top: 40px; border-bottom: 2px solid #ddd; padding-bottom: 10px; }
    </style>
</head>
<body>

    <div class="sidebar">
        <h4 class="mb-4">Kayzen API</h4>
        <a href="/" class="d-block mb-3 text-decoration-none">‚Üê Kembali ke Home</a>
        <div class="list-group">
            <a href="#dramadash" class="list-group-item list-group-item-action">Dramadash</a>
            <a href="#dramabox" class="list-group-item list-group-item-action">Dramabox</a>
            <a href="#downloader" class="list-group-item list-group-item-action">Downloader</a>
            <a href="#tools" class="list-group-item list-group-item-action">Tools & AI</a>
            <a href="#muslim" class="list-group-item list-group-item-action">Muslim</a>
            <a href="#stalk" class="list-group-item list-group-item-action">Stalking</a>
            <a href="#game" class="list-group-item list-group-item-action">Game</a>
            <a href="#tempmail" class="list-group-item list-group-item-action">Tempmail</a>
            <a href="#uploader" class="list-group-item list-group-item-action">Uploader</a>
            <a href="#search" class="list-group-item list-group-item-action">Search</a>
        </div>
    </div>

    <div class="content">
        <h1>Dokumentasi API Interaktif</h1>
        <p class="lead">Silakan masukkan parameter dan klik tombol Test untuk mencoba.</p>

        <h5 id="dramadash">Dramadash</h5>
        
        <div class="endpoint-card" data-method="GET" data-url="/api/dramadash/home">
            <span class="method get">GET</span> <span class="path">/api/dramadash/home</span>
            <div class="mt-3">
                <button class="btn btn-primary btn-sm" onclick="sendRequest(this)">Test Endpoint</button>
            </div>
            <div class="response-area"></div>
        </div>

        <div class="endpoint-card" data-method="GET" data-url="/api/dramadash/search">
            <span class="method get">GET</span> <span class="path">/api/dramadash/search</span>
            <div class="mt-2">
                <div class="input-group mb-2">
                    <span class="input-group-text">q (query)</span>
                    <input type="text" class="form-control param-input" name="q" placeholder="Contoh: love">
                </div>
                <button class="btn btn-primary btn-sm" onclick="sendRequest(this)">Test Endpoint</button>
            </div>
            <div class="response-area"></div>
        </div>

        <div class="endpoint-card" data-method="GET" data-url="/api/dramadash/detail">
            <span class="method get">GET</span> <span class="path">/api/dramadash/detail</span>
            <div class="mt-2">
                <div class="input-group mb-2">
                    <span class="input-group-text">id</span>
                    <input type="text" class="form-control param-input" name="id" placeholder="ID Drama">
                </div>
                <button class="btn btn-primary btn-sm" onclick="sendRequest(this)">Test Endpoint</button>
            </div>
            <div class="response-area"></div>
        </div>

        <h5 id="downloader">Downloader</h5>

        <div class="endpoint-card" data-method="GET" data-url="/api/download/tiktok">
            <span class="method get">GET</span> <span class="path">/api/download/tiktok</span>
            <div class="mt-2">
                <div class="input-group mb-2">
                    <span class="input-group-text">url</span>
                    <input type="text" class="form-control param-input" name="url" placeholder="Link TikTok">
                </div>
                <button class="btn btn-primary btn-sm" onclick="sendRequest(this)">Test Endpoint</button>
            </div>
            <div class="response-area"></div>
        </div>

        <div class="endpoint-card" data-method="GET" data-url="/api/download/youtube">
            <span class="method get">GET</span> <span class="path">/api/download/youtube</span>
            <div class="mt-2">
                <div class="input-group mb-2">
                    <span class="input-group-text">url</span>
                    <input type="text" class="form-control param-input" name="url" placeholder="Link YouTube">
                </div>
                <button class="btn btn-primary btn-sm" onclick="sendRequest(this)">Test Endpoint</button>
            </div>
            <div class="response-area"></div>
        </div>

        <div class="endpoint-card" data-method="GET" data-url="/api/download/spotify">
            <span class="method get">GET</span> <span class="path">/api/download/spotify</span>
            <div class="mt-2">
                <div class="input-group mb-2">
                    <span class="input-group-text">url</span>
                    <input type="text" class="form-control param-input" name="url" placeholder="Link Spotify">
                </div>
                <button class="btn btn-primary btn-sm" onclick="sendRequest(this)">Test Endpoint</button>
            </div>
            <div class="response-area"></div>
        </div>

        <h5 id="tools">Tools & AI</h5>

        <div class="endpoint-card" data-method="GET" data-url="/api/ai/meta-ai">
            <span class="method get">GET</span> <span class="path">/api/ai/meta-ai</span>
            <div class="mt-2">
                <div class="input-group mb-2">
                    <span class="input-group-text">prompt</span>
                    <input type="text" class="form-control param-input" name="prompt" placeholder="Tanya sesuatu ke AI">
                </div>
                <button class="btn btn-primary btn-sm" onclick="sendRequest(this)">Test Endpoint</button>
            </div>
            <div class="response-area"></div>
        </div>

        <div class="endpoint-card" data-method="POST" data-url="/api/tools/imagetoascii">
            <span class="method post">POST</span> <span class="path">/api/tools/imagetoascii</span>
            <p class="text-muted small mt-2">Convert Gambar ke ASCII (Upload)</p>
            <div class="mt-2">
                <div class="input-group mb-2">
                    <input type="file" class="form-control file-input" name="image">
                </div>
                <button class="btn btn-success btn-sm" onclick="sendRequest(this)">Upload & Convert</button>
            </div>
            <div class="response-area"></div>
        </div>

        <div class="endpoint-card" data-method="POST" data-url="/api/tools/removebg">
            <span class="method post">POST</span> <span class="path">/api/tools/removebg</span>
            <p class="text-muted small mt-2">Hapus Background (Upload)</p>
            <div class="mt-2">
                <div class="input-group mb-2">
                    <input type="file" class="form-control file-input" name="image">
                </div>
                <button class="btn btn-success btn-sm" onclick="sendRequest(this)">Upload & Remove BG</button>
            </div>
            <div class="response-area"></div>
        </div>

        <div class="endpoint-card" data-method="GET" data-url="/api/deepimg/generate">
            <span class="method get">GET</span> <span class="path">/api/deepimg/generate</span>
            <div class="mt-2">
                <div class="input-group mb-2">
                    <span class="input-group-text">prompt</span>
                    <input type="text" class="form-control param-input" name="prompt" placeholder="Deskripsi gambar">
                </div>
                <div class="input-group mb-2">
                    <span class="input-group-text">style</span>
                    <input type="text" class="form-control param-input" name="style" value="Anime">
                </div>
                <button class="btn btn-primary btn-sm" onclick="sendRequest(this)">Test Endpoint</button>
            </div>
            <div class="response-area"></div>
        </div>

        <h5 id="muslim">Muslim Features</h5>

        <div class="endpoint-card" data-method="GET" data-url="/api/muslim/jadwalsholat">
            <span class="method get">GET</span> <span class="path">/api/muslim/jadwalsholat</span>
            <div class="mt-2">
                <div class="input-group mb-2">
                    <span class="input-group-text">kota</span>
                    <input type="text" class="form-control param-input" name="kota" placeholder="Contoh: jakarta">
                </div>
                <button class="btn btn-primary btn-sm" onclick="sendRequest(this)">Test Endpoint</button>
            </div>
            <div class="response-area"></div>
        </div>

        <h5 id="stalk">Stalking</h5>

        <div class="endpoint-card" data-method="GET" data-url="/api/stalk/tiktok">
            <span class="method get">GET</span> <span class="path">/api/stalk/tiktok</span>
            <div class="mt-2">
                <div class="input-group mb-2">
                    <span class="input-group-text">username</span>
                    <input type="text" class="form-control param-input" name="username" placeholder="Username TikTok">
                </div>
                <button class="btn btn-primary btn-sm" onclick="sendRequest(this)">Test Endpoint</button>
            </div>
            <div class="response-area"></div>
        </div>

        <h5 id="uploader">Uploader</h5>
        
        <div class="endpoint-card" data-method="POST" data-url="/api/upload/videy">
            <span class="method post">POST</span> <span class="path">/api/upload/videy</span>
            <div class="mt-2">
                <div class="input-group mb-2">
                    <input type="file" class="form-control file-input" name="file">
                </div>
                <button class="btn btn-success btn-sm" onclick="sendRequest(this)">Upload to Videy</button>
            </div>
            <div class="response-area"></div>
        </div>

        <h5 id="search">Search</h5>

        <div class="endpoint-card" data-method="GET" data-url="/api/search/google-image">
            <span class="method get">GET</span> <span class="path">/api/search/google-image</span>
            <div class="mt-2">
                <div class="input-group mb-2">
                    <span class="input-group-text">q (query)</span>
                    <input type="text" class="form-control param-input" name="q" placeholder="Cari gambar apa?">
                </div>
                <button class="btn btn-primary btn-sm" onclick="sendRequest(this)">Test Endpoint</button>
            </div>
            <div class="response-area"></div>
        </div>

    </div>

    <script>
        async function sendRequest(btn) {
            const card = btn.closest('.endpoint-card');
            const method = card.getAttribute('data-method');
            const baseUrl = card.getAttribute('data-url');
            const responseArea = card.querySelector('.response-area');
            const inputs = card.querySelectorAll('.param-input');
            const files = card.querySelectorAll('.file-input');

            responseArea.style.display = 'block';
            responseArea.textContent = 'Processing...';

            try {
                let fetchUrl = baseUrl;
                let options = {
                    method: method
                };

                if (method === 'GET') {
                    const params = new URLSearchParams();
                    inputs.forEach(input => {
                        if (input.value.trim() !== '') {
                            params.append(input.name, input.value);
                        }
                    });
                    const queryString = params.toString();
                    if (queryString) fetchUrl += `?${queryString}`;
                } 
                else if (method === 'POST') {
                    const formData = new FormData();
                    
                    inputs.forEach(input => {
                        if (input.value) formData.append(input.name, input.value);
                    });

                    files.forEach(input => {
                        if (input.files.length > 0) {
                            formData.append(input.name, input.files[0]);
                        }
                    });

                    options.body = formData;
                }

                const res = await fetch(fetchUrl, options);
                
                let resultText;
                const contentType = res.headers.get("content-type");
                
                if (contentType && contentType.indexOf("application/json") !== -1) {
                    const json = await res.json();
                    resultText = JSON.stringify(json, null, 2);
                } else {
                    resultText = await res.text();
                }

                responseArea.textContent = resultText;

            } catch (error) {
                responseArea.textContent = 'Error: ' + error.message;
            }
        }
    </script>
</body>
</html>
