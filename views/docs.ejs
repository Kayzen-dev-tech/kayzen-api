<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Docs - Kayzen</title>
    <link rel="stylesheet" href="/css/style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body class="docs-body">

    <header class="docs-header">
        <h1><i class="fas fa-book"></i> Dokumentasi API</h1>
        <a href="/" class="back-link">Kembali ke Home</a>
    </header>

    <div class="container">
        
        <div class="category">
            <h2><i class="fas fa-download"></i> 1. Media & Download</h2>
            <div class="endpoint-box">
                <div class="endpoint-title"><span class="method">GET</span> /api/search/pinterest</div>
                <div class="input-group"> <input type="text" id="pin_s" class="input-field" placeholder="Cari Pinterest"><button class="btn-send" onclick="sendReq('/api/search/pinterest','q','pin_s')"><i class="fas fa-search"></i></button></div>
            </div>
            <div class="endpoint-box">
                <div class="endpoint-title"><span class="method">GET</span> /api/download/instagram <span class="badge" style="background:#E1306C">Downloader</span></div>
                <div class="input-group"> <input type="text" id="ig_url" class="input-field" placeholder="Link Instagram (Post/Reels)"><button class="btn-send" onclick="sendReq('/api/download/instagram','url','ig_url')"><i class="fas fa-download"></i></button></div>
            </div>
        </div>

        <div class="category">
            <h2><i class="fas fa-tv"></i> 2. Anime & Manga</h2>
            <div class="endpoint-box">
                <div class="endpoint-title"><span class="method">GET</span> /api/anime/search</div>
                <div class="input-group"> <input type="text" id="ani_q" class="input-field" placeholder="Cari Anime"><button class="btn-send" onclick="sendReq('/api/anime/search','q','ani_q')"><i class="fas fa-search"></i></button></div>
            </div>
            <div class="endpoint-box">
                <div class="endpoint-title"><span class="method">GET</span> /api/anime/manga</div>
                <div class="input-group"> <input type="text" id="man_q" class="input-field" placeholder="Cari Manga"><button class="btn-send" onclick="sendReq('/api/anime/manga','q','man_q')"><i class="fas fa-search"></i></button></div>
            </div>
            <div class="endpoint-box">
                <div class="endpoint-title"><span class="method">GET</span> /api/anime/character</div>
                <div class="input-group"> <input type="text" id="char_q" class="input-field" placeholder="Cari Karakter"><button class="btn-send" onclick="sendReq('/api/anime/character','q','char_q')"><i class="fas fa-search"></i></button></div>
            </div>
            <div class="endpoint-box" style="cursor: pointer;" onclick="testApi('/api/anime/top')">
                <div class="endpoint-title"><span class="method">GET</span> /api/anime/top <span class="badge">Klik Disini</span></div>
            </div>
        </div>

        <div class="category">
            <h2><i class="fas fa-shopping-cart"></i> 3. E-Commerce</h2>
            <div class="endpoint-box">
                <div class="endpoint-title"><span class="method">GET</span> /api/search/lazada <span class="badge" style="background:#0f0556">Lazada</span></div>
                <div class="input-group"> <input type="text" id="lzd_q" class="input-field" placeholder="Cari Barang di Lazada"><button class="btn-send" onclick="sendReq('/api/search/lazada','q','lzd_q')"><i class="fas fa-search"></i></button></div>
            </div>
        </div>

        <div class="category">
            <h2><i class="fas fa-tools"></i> 4. Tools & Maker</h2>
            <div class="endpoint-box">
                <div class="endpoint-title"><span class="method">GET</span> /api/tools/lyrics <span class="badge">AI Gen</span></div>
                <div class="input-group"> <input type="text" id="lyric_ai" class="input-field" placeholder="Buat Lirik via AI"><button class="btn-send" onclick="sendReq('/api/tools/lyrics','q','lyric_ai')"><i class="fas fa-robot"></i></button></div>
            </div>
            <div class="endpoint-box">
                <div class="endpoint-title"><span class="method">GET</span> /api/tools/lirik-lagu <span class="badge" style="background:#25D366">Original</span></div>
                <div class="input-group"> <input type="text" id="lyric_real" class="input-field" placeholder="Cari Lirik Lagu (Lirik.my)"><button class="btn-send" onclick="sendReq('/api/tools/lirik-lagu','q','lyric_real')"><i class="fas fa-music"></i></button></div>
            </div>
            <div class="endpoint-box">
                <div class="endpoint-title"><span class="method">GET</span> /api/maker/editor <span class="badge" style="background:#00d2ff">AI Edit</span></div>
                <div class="input-group" style="gap:5px;"> 
                    <input type="text" id="edit_url" class="input-field" placeholder="URL Gambar">
                    <input type="text" id="edit_prompt" class="input-field" placeholder="Prompt (Ex: Make it snowing)">
                    <button class="btn-send" onclick="sendEditReq()"><i class="fas fa-magic"></i></button>
                </div>
            </div>
        </div>

        <div class="category">
            <h2><i class="fas fa-dice"></i> 5. Random & Info</h2>
            <div class="endpoint-box">
                <div class="endpoint-title"><span class="method">GET</span> /api/search/wallpaper</div>
                <div class="input-group"> <input type="text" id="wall_q" class="input-field" placeholder="Cari Wallpaper"><button class="btn-send" onclick="sendReq('/api/search/wallpaper','q','wall_q')"><i class="fas fa-image"></i></button></div>
            </div>
            
            <div class="endpoint-box" style="cursor: pointer;" onclick="testApi('/api/random/waifu')">
                <div class="endpoint-title"><span class="method">GET</span> /api/random/waifu <span class="badge">Klik Disini</span></div>
            </div>

            <div class="endpoint-box" style="cursor: pointer;" onclick="testApi('/api/random/neko')">
                <div class="endpoint-title"><span class="method">GET</span> /api/random/neko <span class="badge">Klik Disini</span></div>
            </div>

             <div class="endpoint-box" style="cursor: pointer;" onclick="testApi('/api/info/gempa')">
                <div class="endpoint-title"><span class="method">GET</span> /api/info/gempa <span class="badge">Klik Disini</span></div>
            </div>
        </div>
    </div>

    <div id="responseModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal()">&times;</span>
            <h3>Result Preview</h3>
            
            <div id="mediaPreview" style="margin-bottom: 15px; text-align: center; display: none;">
                <img id="previewImage" src="" style="max-width: 100%; border-radius: 8px; display: none; margin: 0 auto; border: 1px solid #444;">
                <video id="previewVideo" controls style="max-width: 100%; width: 100%; border-radius: 8px; display: none;"></video>
                <div id="sliderContainer" style="display:none; overflow-x:auto; white-space:nowrap; gap:10px; padding:10px;"></div>
            </div>
            <pre id="jsonOutput">Loading...</pre>
        </div>
    </div>

    <script>
        function sendReq(u,p,i){ const v=document.getElementById(i).value; if(!v)return alert("Isi dulu!"); testApi(`${u}?${p}=${encodeURIComponent(v)}`); }
        
        function sendEditReq() {
            const u = document.getElementById('edit_url').value;
            const p = document.getElementById('edit_prompt').value;
            if(!u || !p) return alert("Isi URL Gambar dan Prompt!");
            testApi(`/api/maker/editor?url=${encodeURIComponent(u)}&prompt=${encodeURIComponent(p)}`);
        }

        function testApi(url){
            const m=document.getElementById('responseModal'),j=document.getElementById('jsonOutput'),md=document.getElementById('mediaPreview'),im=document.getElementById('previewImage'),vi=document.getElementById('previewVideo'),sl=document.getElementById('sliderContainer');
            m.style.display='flex'; j.textContent='Fetching...'; md.style.display='none'; im.style.display='none'; vi.style.display='none'; sl.style.display='none'; sl.innerHTML=""; vi.src="";
            
            fetch(url).then(r=>{ const ct=r.headers.get("content-type"); if(ct&&ct.includes("image")) return r.blob().then(b=>({blob:b,isBlob:true})); return r.json(); })
            .then(d=>{
                if(d.isBlob){ j.textContent="Image Blob"; im.src=URL.createObjectURL(d.blob); im.style.display='block'; md.style.display='block'; }
                else { 
                    j.textContent=JSON.stringify(d,null,2); 
                    if(d.data){
                        const res = d.data;
                        let src = res.url || res.image || res.video || (Array.isArray(res)?res[0]?.imageUrl:null) || (Array.isArray(res)?res[0]:null);
                        
                        if(res.media && Array.isArray(res.media)) {
                            md.style.display='block';
                            if(res.type === 'video') {
                                vi.src = res.media[0]; vi.style.display='block';
                            } else if (res.type === 'slide') {
                                sl.style.display='flex';
                                res.media.forEach(m => {
                                    const img = document.createElement('img');
                                    img.src = m;
                                    img.style.height = '150px';
                                    img.style.borderRadius = '5px';
                                    img.style.marginRight = '5px';
                                    sl.appendChild(img);
                                });
                            } else {
                                im.src = res.media[0]; im.style.display='block';
                            }
                        }
                        else if(src && typeof src === 'string') {
                            md.style.display='block';
                            if(src.match(/\.(mp4)/)) { vi.src=src; vi.style.display='block'; }
                            else { im.src=src; im.style.display='block'; }
                        }
                    }
                }
            }).catch(e=>{j.textContent="Error: "+e});
        }
        function closeModal(){document.getElementById('responseModal').style.display='none';}
    </script>
</body>
</html>
