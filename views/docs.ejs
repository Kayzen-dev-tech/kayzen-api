<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Docs - Kayzen</title>
    <link rel="stylesheet" href="/css/style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body class="docs-body">

    <header class="docs-header">
        <h1><i class="fas fa-book"></i> Dokumentasi API</h1>
        <a href="/" class="back-link">Kembali ke Home</a>
    </header>

    <div class="container">
        <div class="category">
            <h2><i class="fas fa-download"></i> 1. Media & Download</h2>
            <div class="endpoint-box">
                <div class="endpoint-title"><span class="method">GET</span> /api/download/youtube</div>
                <div class="input-group"> <input type="text" id="yt_q" class="input-field" placeholder="Judul Lagu"><button class="btn-send" onclick="sendReq('/api/download/youtube','q','yt_q')"><i class="fas fa-paper-plane"></i></button></div>
            </div>
            <div class="endpoint-box">
                <div class="endpoint-title"><span class="method">GET</span> /api/download/tiktok</div>
                <div class="input-group"> <input type="text" id="tt_u" class="input-field" placeholder="Link TikTok"><button class="btn-send" onclick="sendReq('/api/download/tiktok','url','tt_u')"><i class="fas fa-paper-plane"></i></button></div>
            </div>
            <div class="endpoint-box">
                <div class="endpoint-title"><span class="method">GET</span> /api/download/instagram</div>
                <div class="input-group"> <input type="text" id="ig_u" class="input-field" placeholder="Link Instagram"><button class="btn-send" onclick="sendReq('/api/download/instagram','url','ig_u')"><i class="fas fa-camera-retro"></i></button></div>
            </div>
            <div class="endpoint-box">
                <div class="endpoint-title"><span class="method">GET</span> /api/download/pinterest</div>
                <div class="input-group"> <input type="text" id="pin_u" class="input-field" placeholder="Link Pinterest"><button class="btn-send" onclick="sendReq('/api/download/pinterest','url','pin_u')"><i class="fas fa-thumbtack"></i></button></div>
            </div>
            <div class="endpoint-box">
                <div class="endpoint-title"><span class="method">GET</span> /api/search/tiktok</div>
                <div class="input-group"> <input type="text" id="tt_s" class="input-field" placeholder="Cari TikTok"><button class="btn-send" onclick="sendReq('/api/search/tiktok','q','tt_s')"><i class="fas fa-search"></i></button></div>
            </div>
            <div class="endpoint-box">
                <div class="endpoint-title"><span class="method">GET</span> /api/search/pinterest</div>
                <div class="input-group"> <input type="text" id="pin_s" class="input-field" placeholder="Cari Pinterest"><button class="btn-send" onclick="sendReq('/api/search/pinterest','q','pin_s')"><i class="fas fa-search"></i></button></div>
            </div>
            <div class="endpoint-box">
                <div class="endpoint-title"><span class="method">GET</span> /api/search/wiki</div>
                <div class="input-group"> <input type="text" id="wiki_q" class="input-field" placeholder="Cari Wiki"><button class="btn-send" onclick="sendReq('/api/search/wiki','q','wiki_q')"><i class="fas fa-book"></i></button></div>
            </div>
        </div>

        <div class="category">
            <h2><i class="fas fa-tools"></i> 2. Tools / Maker</h2>
            <div class="endpoint-box">
                <div class="endpoint-title"><span class="method">GET</span> /api/maker/brat <span class="badge" style="background:hotpink">Anime V2</span></div>
                <div class="input-group"> <input type="text" id="brat_t" class="input-field" placeholder="Teks Brat"><button class="btn-send" onclick="sendReq('/api/maker/brat','text','brat_t')"><i class="fas fa-paint-brush"></i></button></div>
            </div>
            <div class="endpoint-box">
                <div class="endpoint-title"><span class="method">GET</span> /api/tools/img2ascii</div>
                <div class="input-group"> <input type="text" id="asc_u" class="input-field" placeholder="Link Gambar"><button class="btn-send" onclick="sendReq('/api/tools/img2ascii','url','asc_u')"><i class="fas fa-image"></i></button></div>
            </div>
        </div>

        <div class="category">
            <h2><i class="fas fa-eye"></i> 3. Stalker</h2>
            <div class="endpoint-box">
                <div class="endpoint-title"><span class="method">GET</span> /api/stalk/github</div>
                <div class="input-group"> <input type="text" id="gh_u" class="input-field" placeholder="User Github"><button class="btn-send" onclick="sendReq('/api/stalk/github','username','gh_u')"><i class="fas fa-search"></i></button></div>
            </div>
            <div class="endpoint-box">
                <div class="endpoint-title"><span class="method">GET</span> /api/stalk/instagram</div>
                <div class="input-group"> <input type="text" id="ig_stalk" class="input-field" placeholder="User IG"><button class="btn-send" onclick="sendReq('/api/stalk/instagram','username','ig_stalk')"><i class="fab fa-instagram"></i></button></div>
            </div>
            <div class="endpoint-box">
                <div class="endpoint-title"><span class="method">GET</span> /api/stalk/tiktok</div>
                <div class="input-group"> <input type="text" id="tt_stalk" class="input-field" placeholder="User TikTok"><button class="btn-send" onclick="sendReq('/api/stalk/tiktok','username','tt_stalk')"><i class="fab fa-tiktok"></i></button></div>
            </div>
             <div class="endpoint-box">
                <div class="endpoint-title"><span class="method">GET</span> /api/stalk/npm</div>
                <div class="input-group"> <input type="text" id="npm_u" class="input-field" placeholder="Nama Paket NPM"><button class="btn-send" onclick="sendReq('/api/stalk/npm','package','npm_u')"><i class="fas fa-search"></i></button></div>
            </div>
        </div>
    </div>

    <div id="responseModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal()">&times;</span>
            <h3>Result Preview</h3>
            <div id="mediaPreview" style="margin-bottom: 15px; text-align: center; display: none;">
                <img id="previewImage" src="" style="max-width: 100%; border-radius: 8px; display: none; margin: 0 auto; border: 1px solid #444;">
                <video id="previewVideo" controls style="max-width: 100%; width: 100%; border-radius: 8px; display: none;"></video>
                <audio id="previewAudio" controls style="width: 100%; margin-top: 10px; display: none;"></audio>
            </div>
            <pre id="jsonOutput">Loading...</pre>
        </div>
    </div>

    <script>
        function sendReq(u,p,i){ const v=document.getElementById(i).value; if(!v)return alert("Isi dulu!"); testApi(`${u}?${p}=${encodeURIComponent(v)}`); }
        function testApi(url){
            const m=document.getElementById('responseModal'),j=document.getElementById('jsonOutput'),md=document.getElementById('mediaPreview'),im=document.getElementById('previewImage'),vi=document.getElementById('previewVideo'),au=document.getElementById('previewAudio');
            m.style.display='flex'; j.textContent='Fetching...'; md.style.display='none'; im.style.display='none'; vi.style.display='none'; au.style.display='none'; vi.src=""; au.src="";
            fetch(url).then(r=>{ const ct=r.headers.get("content-type"); if(ct&&ct.includes("image")) return r.blob().then(b=>({blob:b,isBlob:true})); return r.json(); })
            .then(d=>{
                if(d.isBlob){ j.textContent="Image Blob"; im.src=URL.createObjectURL(d.blob); im.style.display='block'; md.style.display='block'; }
                else { 
                    j.textContent=JSON.stringify(d,null,2); 
                    if(d.data){
                        let src = d.data.url || d.data.image || d.data.video || (Array.isArray(d.data)?d.data[0]:null);
                        if(d.data.result) src = d.data.result.url || d.data.result; 
                        
                        if(src && typeof src === 'string') {
                            md.style.display='block';
                            if(src.match(/\.(mp4)/)) { vi.src=src; vi.style.display='block'; }
                            else if(src.match(/\.(mp3)/)) { au.src=src; au.style.display='block'; }
                            else { im.src=src; im.style.display='block'; }
                        }
                    }
                }
            }).catch(e=>{j.textContent="Error: "+e});
        }
        function closeModal(){document.getElementById('responseModal').style.display='none';}
    </script>
</body>
</html>
